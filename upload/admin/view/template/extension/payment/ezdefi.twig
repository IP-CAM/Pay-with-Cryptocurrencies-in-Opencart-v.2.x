{{ header }} {{ column_left }}

<div id="content">
    <form action="{{ action }}" class="form-horizontal" method="POST" id="ezdefi-form-config" data-url_validate_wallet="{{ url_validate_wallet }}">
        <div class="page-header">
            <div class="container-fluid">
                <div class="pull-right">
                    <button type="submit" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary" form="ezdefi-form-config"><i class="fa fa-save"></i></button>
                    <a href="{{ action.cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a>
                </div>
                    <h1>{{ heading_title }}</h1>
                <ul class="breadcrumb">
                    {% for breadcrumb in breadcrumbs %}
    {#                    <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>#}
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="container-fluid">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title"><i class="fa fa-pencil"></i> {{tab_edit_general}} </h3>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="control-label col-md-3" for="enable">{{ entry_enable_extension }}</label>
                        <div class="col-sm-9">
                            <input type="checkbox" id="enable" class="form-control" name="payment_ezdefi_status" {{ payment_ezdefi_status ? 'checked': ''}}>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3" for="gateway-api-url"> {{ entry_gateway_api_url }} </label>
                        <div class="col-md-9">
                            <input type="text" id="gateway-api-url" class="form-control" name="payment_ezdefi_gateway_api_url" value="{{ payment_ezdefi_gateway_api_url }}">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3" for="gateway-api-url"> {{ entry_api_key }} </label>
                        <div class="col-md-9">
                            <input type="text" id="api-key" class="form-control col-md-9" name="payment_ezdefi_api_key" value="{{ payment_ezdefi_api_key }}">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3" for="order-status"> {{ entry_order_status }} </label>
                        <div class="col-md-9">
                            <input type="text" id="order-status" class="form-control col-md-9" name="payment_ezdefi_order_status" value="{{ payment_ezdefi_order_status }}">
                        </div>
                    </div>
                </div>
                <div class="panel-heading">
                    <h3 class="panel-title"><i class="fa fa-pencil"></i> {{ tab_edit_coin_config }} </h3>
                </div>
                <div class="panel-body">
                    <table class="table">
                        <thead>
                            <tr>
                                <th></th>
                                <th></th>
                                <th>{{ text_symbol }}</th>
                                <th>{{ text_name }}</th>
                                <th>{{ text_discount }}</th>
                                <th>{{text_payment_lifetime}}</th>
                                <th>{{text_wallet_address}}</th>
                                <th>{{ text_safe_block_distant }}</th>
                            </tr>
                        </thead>
                        <tbody id="coin-config__table">
                        {% for coin_config in coins_config %}
                            <tr id="config-row-{{ coin_config.ezdefi_coin_id }}">
                                <td class="sortable-handle">
                                    <i class="fa fa-arrows" aria-hidden="true"></i>
                                    <input type="hidden" class="coin-config__order" name="{{coin_config.ezdefi_coin_id}}[coin_order]" value="{{ coin_config.order }}">
                                    <input type="hidden" class="coin-config__id" name="{{coin_config.ezdefi_coin_id}}[coin_id]" value="{{coin_config.ezdefi_coin_id}}">
                                </td>
                                <td>
                                    <img src="{{ coin_config.logo }}" alt="">
                                </td>
                                <td>
                                    <p>{{coin_config.symbol}}</p>
                                    <a class="btn-edit" data-toggle="modal" data-target="#modal-edit-{{ coin_config.ezdefi_coin_id }}">{{ text_edit }}</a> |
                                    <a class="btn-delete" data-toggle="modal" data-target="#modal-delete-{{ coin_config.ezdefi_coin_id }}">{{ text_delete }}</a>
                                </td>
                                <td>{{coin_config.name}}</td>
                                <td class="coin-discount">{{ coin_config.discount }}%</td>
                                <td class="coin-payment-lifetime">{{ coin_config.payment_lifetime }}</td>
                                <td class="coin-wallet-address">{{ coin_config.wallet_address }}</td>
                                <td class="coin-safe-block-distant">{{ coin_config.safe_block_distant }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <button id="btn-add" class="btn btn-primary" form="" data-list_coin_url="{{ url_get_coin }}">
                        {{ button_add }}
                    </button>
                </div>
            </div>
        </div>
        {% for coin_config in coins_config %}
            <div id="modal-edit-{{ coin_config.ezdefi_coin_id }}" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">EDIT</h4>
                        </div>
                        <div class="modal-body">
                            <img src="{{ coin_config.logo }}" alt=""> <span style="padding-left: 20px"> {{ coin_config.symbol }}/{{ coin_config.name }} </span>
                            <div>
                                <div class="form-group">
                                    <label>Discount</label>
                                    <input type="text" class="form-control coin-config__discount" id="edit-discount-{{ coin_config.ezdefi_coin_id }}" value="{{ coin_config.discount }}" name="{{ coin_config.ezdefi_coin_id }}['edit_discount']">
                                </div>
                                <div class="form-group">
                                    <label>Payment lifetime</label>
                                    <input type="text" class="form-control coin-config__payment-lifetime" id="edit-payment-lifetime-{{ coin_config.ezdefi_coin_id }}" value="{{ coin_config.payment_lifetime }}" name="{{ coin_config.ezdefi_coin_id }}['edit_payment_lifetime']">
                                </div>
                                <div class="form-group">
                                    <label>Wallet address </label>
                                    <input type="text" class="form-control coin-config__wallet-address" id="edit-wallet-address-{{ coin_config.ezdefi_coin_id }}" value="{{ coin_config.wallet_address }}" name="{{ coin_config.ezdefi_coin_id }}['edit_wallet_address']">
                                </div>
                                <div class="form-group">
                                    <label>Safe block distant</label>
                                    <input type="text" class="form-control coin-config__safe-block-distant" id="edit-safe-block-distant-{{ coin_config.ezdefi_coin_id }}" value="{{ coin_config.safe_block_distant }}" name="{{ coin_config.ezdefi_coin_id }}['edit_coin_safe_block_distant']">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer" style="text-align: center">
                            <button type="button" class="btn btn-danger" data-dismiss="modal">{{ button_close }}</button>
                            <button type="button" class="btn btn-primary btn-submit-edit" data-coin_id="{{ coin_config.ezdefi_coin_id }}" data-url_edit="{{ url_edit }}">{{ button_save }}</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="modal-delete-{{ coin_config.ezdefi_coin_id }}" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Delete config</h4>
                        </div>
                        <div class="modal-body">
                            <p>Do you want to delete this config</p>
                            <div>
                                <img src="{{ coin_config.logo }}" alt=""> <span style="padding-left: 20px"> {{ coin_config.symbol }}/{{ coin_config.name }} </span>
                            </div>
                        </div>
                        <div class="modal-footer" style="text-align: center">
                            <button type="button" class="btn btn-danger" data-dismiss="modal">{{ button_close }}</button>
                            <button type="button" class="btn btn-primary btn-confirm-delete" data-coin_id="{{ coin_config.ezdefi_coin_id }}" data-url_delete="{{ url_delete }}">{{ button_yes }}</button>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </form>
</div>

{{ footer }}